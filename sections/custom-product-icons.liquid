{% comment %}
  Section: Product Icons Row (5 max)
  Lee metacampos de imagen: custom.icon_one ... custom.icon_five
  Tipo recomendado: Archivo (file_reference) -> Imagen
{% endcomment %}

<section class="icons-row icons-row-{{ section.id }} color-{{ section.settings.color_scheme }} section-{{ section.id }}-padding">
  {% if section.settings.heading != blank %}
    <div class="page-width"><h2 class="icons-row__title">{{ section.settings.heading }}</h2></div>
  {% endif %}

  <div class="page-width">
    <ul class="icons-row__grid" role="list">
      {%- assign keys = "icon_one,icon_two,icon_three,icon_four,icon_five" | split: "," -%}
      {%- for k in keys -%}
        {%- assign mf = product.metafields.custom[k] -%}
        {%- assign media = mf.value | default: mf -%}
        {%- if media -%}
          <li class="icons-row__item">
            <div class="icons-row__circle">
                <img
                  class="icons-row__img"
                  src="{{ media | image_url: width: 240 }}"
                  width="{{ media.width }}"
                  height="{{ media.height }}"
                  loading="lazy"
                >
            </div>
          </li>
        {%- endif -%}
      {%- endfor -%}
    </ul>
  </div>

  <style>
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
        border-top: 1px solid {{section.settings.border_color}};
        border-bottom: 1px solid {{section.settings.border_color}};        
    }

    .icons-row-{{ section.id }} .icons-row__title{
      margin: 0 0 1rem 0;
      font-size: {{ section.settings.heading_size }};
      line-height: 1.1;
      text-align: {{ section.settings.heading_align }};
    }

    .icons-row-{{ section.id }} .icons-row__grid{
      gap: {{ section.settings.gap }}px;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
      align-items: center;
      justify-items: center;
    }


    .icons-row-{{ section.id }} .icons-row__item{
      display: grid; place-items: center;
    }

    .icons-row-{{ section.id }} .icons-row__circle{
      width: {{ section.settings.icon_size }}px;
      height: {{ section.settings.icon_size }}px;
      border: {{ section.settings.border_width }} solid {{ section.settings.circle_border_color }};
      background: {{ section.settings.bg_circle }};
      overflow: hidden;      
      border-radius: 999px;
      display: grid;
      place-items: center;
      overflow: hidden;
    }

    .icons-row-{{ section.id }} .icons-row__img{
      max-width: calc({{ section.settings.icon_size }}px - 2*{{ section.settings.padding_inset }}px);
      max-height: calc({{ section.settings.icon_size }}px - 2*{{ section.settings.padding_inset }}px);
      width: auto; height: auto;
      object-fit: contain;
      filter: {% if section.settings.monochrome %}grayscale(1){% else %}none{% endif %};
    }
  </style>
</section>

{% schema %}
{
  "name": "Product Icons Row",
  "tag": "section",
  "class": "section product-icons-row",
  "settings": [

    { "type": "range", "id": "icon_size", "min": 0, "max": 260, "step": 20, "unit": "px", "label": "Tamaño del icono", "default": 220 },
    { "type": "range", "id": "padding_inset", "min": 0, "max": 20, "step": 2, "unit": "px", "label": "Relleno icono", "default": 18 },
    { "type": "range", "id": "gap", "min": 0, "max": 40, "step": 2, "unit": "px", "label": "Espacio entre iconos", "default": 40 },
    {
      "type": "color",
      "id": "border_color",
      "label": "Color del borde de la seccion",
      "default": "#000000"
    }, 
    { "type": "color", "id": "bg_circle", "label": "Fondo del círculo", "default": "#ffffff" },
    { "type": "color", "id": "circle_border_color", "label": "Color del borde del círculo", "default": "#262626" },
    { "type": "text", "id": "border_width", "label": "Grosor del borde (ej. 1px)", "default": "1px" },
    { "type": "checkbox", "id": "monochrome", "label": "Forzar escala de grises", "default": false },

    { "type": "color_scheme", "id": "color_scheme", "label": "Esquema de color", "default": "scheme-1" },
    { "type": "header", "content": "Espaciado sección" },
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding superior", "default": 24 },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding inferior", "default": 24 }
  ],
  "presets": [
    { "name": "Product Icons", "category": "Custom" }
  ]
}
{% endschema %}
